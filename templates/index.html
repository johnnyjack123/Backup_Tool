<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Backup Status</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4">Backup Status</h1>
        <div id="backupContainer" class="row g-3"></div>
    </div>

    <script>
        // Übergib das Python-Array als JSON vom Backend
        const backupArray = {{ backup_paths | tojson }};
        const container = document.getElementById('backupContainer');

        // Iteriere über alle Dictionaries
        backupArray.forEach(entry => {
            // Erstelle Bootstrap-Card als Rahmen
            const card = document.createElement('div');
            card.classList.add('col-md-6', 'col-lg-4'); // responsive Spalten
            const cardBody = document.createElement('div');
            cardBody.classList.add('card', 'shadow-sm');

            // Kopfzeile mit dem "name"-Wert, falls vorhanden
            const header = document.createElement('div');
            header.classList.add('card-header', 'bg-primary', 'text-white', 'fw-bold');
            header.textContent = entry.name ? entry.name : 'Unbenanntes Backup';

            // UL-Liste für die restlichen Key-Value-Paare
            const ul = document.createElement('ul');
            ul.classList.add('list-group', 'list-group-flush');

            // Schleife durch alle Schlüssel/Werte außer "name"
            for (const [key, value] of Object.entries(entry)) {
                if (key === 'name') continue; // 'name' nicht noch mal anzeigen
                const li = document.createElement('li');
                li.classList.add('list-group-item');
                li.innerHTML = `<strong>${key}:</strong> ${value}`;
                ul.appendChild(li);
            }

            // Elemente zusammensetzen
            cardBody.appendChild(header);
            cardBody.appendChild(ul);
            card.appendChild(cardBody);

            // Zur Seite hinzufügen
            container.appendChild(card);
        });
    </script>
</body>
</html>
